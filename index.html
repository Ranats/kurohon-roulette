---
title: 黒本ルーレット
---

<!DOCTYPE html>
<html lang="ja">

<head>
  {% include head.html %}
</head>

<body>
  <div class="lang-switch">
    <a href="./en/">🌐English</a>
  </div>
  <main>
    <h1>黒本 ルーレット</h1>
    <div class="filters">

      <div class="filter-row">
        <label>対象本:</label>
        <div id="bookSelector" style="margin-left: 0.5rem;">
          <label><input type="checkbox" id="book1" onchange="toggleBookSet()" value="bible_1" checked> 黒本1</label>
          <label><input type="checkbox" id="book2" onchange="toggleBookSet()" value="bible_2"> 黒本2</label>
        </div>
      </div>



      <div class="filter-row">
        <label for="keySelector">キー:</label>
        <select id="keySelector">
          <option value="">選択してください</option>
        </select>
      </div>
      <div id="keyTags" class="tag-container"></div>

      <div class="filter-row">
        <label for="styleSelector">スタイル:</label>
        <select id="styleSelector">
          <option value="">選択してください</option>
        </select>
      </div>
      <div id="styleTags" class="tag-container"></div>
    </div>

    <div class="button-container">
      <button onclick="pickRandomTune()">ランダムで1曲選ぶ</button>
      <button onclick="resetSongs()" class="reset-button">リセット</button>
    </div>
    <div id="result">🎷 結果がここに表示されます</div>
    <div id="history">
      <h2 style="font-size: 1rem;">🎼 やった曲リスト</h2>
      <ul id="historyList"></ul>
    </div>
  </main>





  <div class="carousel-section">
    <div class="carousel-tabs">
      <div class="active" onclick="switchCarouselTab('group-kurohon', this)">黒本シリーズ</div>
      <div onclick="switchCarouselTab('group-theory', this)">ジャズ理論書籍</div>
      <div onclick="switchCarouselTab('group-realbook', this)">Real Book</div>
    </div>
    <!-- 黒本シリーズ -->
    <div class="carousel-wrapper carousel-group active" id="group-kurohon">
      <button class="carousel-button left" onclick="scrollCarousel('carousel-kurohon', -1)">‹</button>
      <div class="carousel" id="carousel-kurohon">

        <div class="carousel-item">
          <a href="https://amzn.to/4keZTfY" target="_blank">
            <img src="./assets/4845618710.09_SL110_.jpg" alt="">
            黒本（In C）
          </a>
        </div>
        <div class="carousel-item">
          <a href="https://amzn.to/3GofCLZ" target="_blank">
            <img src="./assets/4845628244.09_SL110_.jpg" alt="">
            黒本 ハンディ（In C）
          </a>
        </div>
        <div class="carousel-item">
          <a href="https://amzn.to/40uRJcr" target="_blank">
            <img src="./assets/4845619458.09_SL110_.jpg" alt="">
            黒本（In Bb）
          </a>
        </div>
        <div class="carousel-item">
          <a href="https://amzn.to/4eoVhme" target="_blank">
            <img src="./assets/4845629828.09_SL110_.jpg" alt="">
            黒本 ハンディ（In Bb）
          </a>
        </div>
        <div class="carousel-item">
          <a href="https://amzn.to/3ZSTLTv" target="_blank">
            <img src="./assets/484561944X.09_SL110_.jpg" alt="">
            黒本（In Eb）
          </a>
        </div>
        <div class="carousel-item">
          <a href="https://amzn.to/45MmA7P" target="_blank">
            <img src="./assets/4845629968.09_SL110_.jpg" alt="">
            黒本 2（In C）
          </a>
        </div>
        <div class="carousel-item">
          <a href="https://amzn.to/45N1G8D" target="_blank">
            <img src="./assets/4845638037.09_SL110_.jpg" alt="">
            黒本 2 ハンディ（In C）
          </a>
        </div>
        <div class="carousel-item">
          <a href="https://amzn.to/4er8N8Q" target="_blank">
            <img src="./assets/484563256X.09_SL110_.jpg" alt="">
            黒本 2（In Bb）
          </a>
        </div>
        <div class="carousel-item">
          <a href="https://amzn.to/3ZXmu9Q" target="_blank">
            <img src="./assets/4845632578.09_SL110_.jpg" alt="">
            黒本 2（In Eb）
          </a>
        </div>

      </div>

      <button class="carousel-button right" onclick="scrollCarousel('carousel-kurohon', 1)">›</button>
    </div>

    <!-- ジャズ理論書籍 -->
    <div class="carousel-wrapper carousel-group" id="group-theory">
      <button class="carousel-button left" onclick="scrollCarousel('carousel-theory', -1)">‹</button>
      <div class="carousel centered-if-few" id="carousel-theory">
        <div class="carousel-item">
          <a href="https://amzn.to/3TS742U" target="_blank">
            <img src="./assets/4845623994.09_SL110_.jpg" alt="">
            ジャズ・スタンダード・セオリー
          </a>
        </div>
        <div class="carousel-item">
          <a href="https://amzn.to/4lwJ1CF" target="_blank">
            <img src="./assets/499019411X.09_SL110_.jpg" alt="">
            ジャズセオリーワークショップ
          </a>
        </div>
      </div>
      <button class="carousel-button right" onclick="scrollCarousel('carousel-theory', 1)">›</button>
    </div>

    <!-- Real Book シリーズ -->
    <div class="carousel-wrapper carousel-group" id="group-realbook">
      <button class="carousel-button left" onclick="scrollCarousel('carousel-realbook', -1)">‹</button>

      <div class="carousel" id="carousel-realbook">
        <div class="carousel-item">
          <a href="https://amzn.to/4emFZOQ" target="_blank">
            <img src="./assets/0634060384.09_SL110_.jpg" alt="">
            Vol.1（C）
          </a>
        </div>
        <div class="carousel-item">
          <a href="https://amzn.to/44nzp6l" target="_blank">
            <img src="./assets/1423424522.09_SL110_.jpg" alt="">
            Vol.2（C）
          </a>
        </div>
        <div class="carousel-item">
          <a href="https://amzn.to/3TiJvAh" target="_blank">
            <img src="./assets/0634060848.09_SL110_.jpg" alt="">
            Vol.1（Bb）
          </a>
        </div>
        <div class="carousel-item">
          <a href="https://amzn.to/3Glhu8c" target="_blank">
            <img src="./assets/1480384534.09_SL110_.jpg" alt="">
            Vol.2（Bb）
          </a>
        </div>
        <div class="carousel-item">
          <a href="https://amzn.to/3TS7o1C" target="_blank">
            <img src="./assets/1495027929.09_SL110_.jpg" alt="">
            Vol.1（Eb）
          </a>
        </div>
        <div class="carousel-item">
          <a href="https://amzn.to/4nolB44" target="_blank">
            <img src="./assets/B0F63YDNCN.09_SL110_.jpg" alt="">
            Vol.2（Eb／Kindle）
          </a>
        </div>
      </div>
      <button class="carousel-button right" onclick="scrollCarousel('carousel-realbook', 1)">›</button>
    </div>
  </div>


  <div class="support-section">
    🎷 このサイトの運営は，皆さまからのご支援により成り立っています．<br>
    🎺 もしよろしければ，ご支援をお願いいたします．
    <div class="support-buttons">
      <a href="https://coff.ee/sopurani88f" target="_blank">Buy Me a Coffee</a>
      <a href="https://github.com/sponsors/Ranats" target="_blank">GitHub Sponsors</a>
      <a href="https://ofuse.me/d2c3aa65" target="_blank">OFUSE</a>
      <a href="https://ko-fi.com/ranats" target="_blank">Ko-fi</a>
    </div>
  </div>

  <script src="./includes/main.js"></script>
  <script>
    function setupBookSelector() {
      const checkboxes = document.querySelectorAll('#bookSelector input[type="checkbox"]');
      checkboxes.forEach(cb => {
        cb.addEventListener('change', (event) => {
          const value = cb.value;

          if (cb.checked) {
            selectedBooks.add(value);
          } else {
            selectedBooks.delete(value);

            // 両方外されている場合、キャンセルして元に戻す
            if (selectedBooks.size === 0) {
              alert("少なくとも1つは選択してください。");
              cb.checked = true;
              selectedBooks.add(value);
              return;
            }
          }

          loadSongs(); // データの再読み込み
        });
      });
    }

    async function loadSongs() {
      allSongs = [];
      const fetches = [...selectedBooks].map(async book => {
        const file = `data/jazz_standard_${book}.json`; // 例: jazz_standard_bible1.json
        try {
          const res = await fetch(file);
          const data = await res.json();
          data.forEach(song => song.book = book === "bible_1" ? "黒本1" : "黒本2");
          allSongs.push(...data); // ここで .map(..., book: book) を追加してもOK
        } catch (e) {
          console.error(`Failed to load ${file}`, e);
        }
      });
      await Promise.all(fetches);
      applyFilters();
    }

    function pickRandomTune() {
      if (songs.length === 0) {
        alert("全ての曲を選びました！\nリストをリセットするか，条件を変更してください．");
        return;
      }
      const index = Math.floor(Math.random() * songs.length);
      const selected = songs[index];
      songs.splice(index, 1);
      const searchUrl = `https://www.youtube.com/results?search_query=${encodeURIComponent(selected.title + ' jazz')}`;
      const resultText = `🎵 ${selected.title}（p.${selected.page}）<div class="result-sub">
      作曲: ${selected.composer || "不明"}<br>
      キー: ${selected.key || "不明"}<br>
      スタイル: ${selected.style || "不明"}<br>
      備考: ${selected.note || "なし"}<br>
      🗂 掲載本: ${selected.book || "不明"}<br>
      🔗 <a href="${searchUrl}" target="_blank">YouTubeで検索</a></div>`;
      document.getElementById("result").innerHTML = resultText;
      historyList.unshift(`🎵 ${selected.title}（${selected.book || "不明"}）`);
      updateHistory();
    }

    function resetSongs() {
      songs = [...allSongs]; // 全ての曲をリセット
      historyList.length = 0; // 履歴をクリア
      keyTags.clear(); // キーフィルターをクリア
      styleTags.clear(); // スタイルフィルターをクリア
      updateTagDisplay(); // タグ表示を更新
      applyFilters(); // フィルターを再適用
      document.getElementById("result").innerHTML = "🎷 結果がここに表示されます";
      updateHistory();
    }
    loadSongs();
  </script>
</body>

</html>